---
// @ts-nocheck
import { scrapeComic } from "../services/scraper";

import Layout from "../layouts/Layout.astro";
import ComicCard from "../components/ComicCard.astro";

// Crear un objeto URLSearchParams basado en la URL
const params = Astro.url.searchParams;
// Obtener el valor del par√°metro 'nombre'
const comicURL = params.get("comicURL");
const date = params.get("readDate");
console.log(Astro.url);
console.log(params);

const comic = await scrapeComic(comicURL, date);

const {
  imageURL,
  comicTitle,
  releaseDate,
  readDate,
  writers,
  pencilers,
  inkers,
  colorists,
} = comic;

console.log(comic);
// console.log(writersArray);
---

<Layout title={comicTitle} referrer="same-origin">
  <ComicCard
    imageURL={imageURL}
    comicTitle={comicTitle}
    comicURL={comicURL}
    releaseDate={releaseDate}
    readDate={readDate}
    writers={writers}
    pencilers={pencilers}
    inkers={inkers}
    colorists={colorists}
  />
</Layout>
